flowchart LR
  subgraph Users["Benutzer"]
    Browser["Browser (Angular SPA)"]
  end

  subgraph Edge["Edge/Ingress"]
    LB["Reverse Proxy / Nginx"]
  end

  subgraph App["Application Layer"]
    Hub["Hub Agent (ROLE=hub)"]
    Worker["Worker Agents"]
  end

  subgraph Data["Data Layer"]
    DB[("PostgreSQL")]
    Redis[("Redis (Caching/Rate-Limit)")]
    Files["File Storage (Logs/Data)"]
  end

  subgraph External["External Services"]
    LLM["LLM (LMStudio/Ollama/OpenAI)"]
  end

  Browser -->|HTTPS| LB
  LB -->|HTTP| Hub
  Hub -->|API| Worker
  Hub --> DB
  Hub --> Redis
  Hub --> Files
  Worker --> Files
  Worker --> LLM
